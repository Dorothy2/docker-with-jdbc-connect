CREATE DATABASE kconnect;

USE kconnect;

CREATE TABLE CURRENCY(
  CRRNCY_CD varchar(3) NOT NULL,
  CRRNCY_NAME varchar(60) NOT NULL,
  CALC_PRECISION int NOT NULL,
  CRD_LOCK char(1) NOT NULL,
  AVGPRICE_ROUND_OVRD int NULL,
  ISO_CRRNCY_CD varchar(3) NULL,
  CRRNCY_SEC_ID mediumint NULL,
  EURO_FLAG char(1) NOT NULL,
  TRUNC_FLAG char(1) NOT NULL,
  PRIMARY KEY( CRRNCY_CD)
);

INSERT INTO CURRENCY(CRRNCY_CD, CRRNCY_NAME, CALC_PRECISION, CRD_LOCK, AVGPRICE_ROUND_OVRD, ISO_CRRNCY_CD, CRRNCY_SEC_ID, EURO_FLAG, TRUNC_FLAG)
VALUES('BYN', 'Belarussion Ruble', 0, 'Y', null, 'BYN', null, 'N', 'N');

INSERT INTO CURRENCY(CRRNCY_CD, CRRNCY_NAME, CALC_PRECISION, CRD_LOCK, AVGPRICE_ROUND_OVRD, ISO_CRRNCY_CD, CRRNCY_SEC_ID, EURO_FLAG, TRUNC_FLAG)
VALUES('EUR', 'European Euro', 2, 'Y', null, 'EUR', null, 'N', 'N');

INSERT INTO CURRENCY(CRRNCY_CD, CRRNCY_NAME, CALC_PRECISION, CRD_LOCK, AVGPRICE_ROUND_OVRD, ISO_CRRNCY_CD, CRRNCY_SEC_ID, EURO_FLAG, TRUNC_FLAG)
VALUES('HTG', 'Haitian Gourde', 2, 'Y', null, 'HTG', null, 'N', 'N');

INSERT INTO CURRENCY(CRRNCY_CD, CRRNCY_NAME, CALC_PRECISION, CRD_LOCK, AVGPRICE_ROUND_OVRD, ISO_CRRNCY_CD, CRRNCY_SEC_ID, EURO_FLAG, TRUNC_FLAG)
VALUES('MXV', 'Mexican Unidad de Inversion (UDI)', 2, 'Y', null, 'MXV', null, 'N', 'N');

INSERT INTO CURRENCY(CRRNCY_CD, CRRNCY_NAME, CALC_PRECISION, CRD_LOCK, AVGPRICE_ROUND_OVRD, ISO_CRRNCY_CD, CRRNCY_SEC_ID, EURO_FLAG, TRUNC_FLAG)
VALUES('OMR', 'Omani Rial', 3, 'Y', null, 'OMR', null, 'N', 'N');

INSERT INTO CURRENCY(CRRNCY_CD, CRRNCY_NAME, CALC_PRECISION, CRD_LOCK, AVGPRICE_ROUND_OVRD, ISO_CRRNCY_CD, CRRNCY_SEC_ID, EURO_FLAG, TRUNC_FLAG)
VALUES('THB', 'Thailand Bhat', 2, 'Y', null, 'THB', null, 'N', 'N');

INSERT INTO CURRENCY(CRRNCY_CD, CRRNCY_NAME, CALC_PRECISION, CRD_LOCK, AVGPRICE_ROUND_OVRD, ISO_CRRNCY_CD, CRRNCY_SEC_ID, EURO_FLAG, TRUNC_FLAG)
VALUES('UAH', 'Ukraine Hryvna', 2, 'Y', null, 'UAH', null, 'N', 'N');

INSERT INTO CURRENCY(CRRNCY_CD, CRRNCY_NAME, CALC_PRECISION, CRD_LOCK, AVGPRICE_ROUND_OVRD, ISO_CRRNCY_CD, CRRNCY_SEC_ID, EURO_FLAG, TRUNC_FLAG)
VALUES('USN', 'US Dollar (Next day)', 2, 'Y', null, 'USN', null, 'N', 'N');

INSERT INTO CURRENCY(CRRNCY_CD, CRRNCY_NAME, CALC_PRECISION, CRD_LOCK, AVGPRICE_ROUND_OVRD, ISO_CRRNCY_CD, CRRNCY_SEC_ID, EURO_FLAG, TRUNC_FLAG)
VALUES('VEB', 'Venezuelan Bolivar', 2, 'Y', null, 'VEB', null, 'N', 'N');

INSERT INTO CURRENCY(CRRNCY_CD, CRRNCY_NAME, CALC_PRECISION, CRD_LOCK, AVGPRICE_ROUND_OVRD, ISO_CRRNCY_CD, CRRNCY_SEC_ID, EURO_FLAG, TRUNC_FLAG)
VALUES('VEF', 'Venezuelan Bolivar', 2, 'Y', null, 'VEF', null, 'N', 'N');

  
CREATE USER 'debezium'@'%' IDENTIFIED WITH mysql_native_password BY 'dbz';  
CREATE USER 'foobar'@'%' IDENTIFIED WITH mysql_native_password BY 'sqluserpw';

GRANT USAGE ON *.* TO 'foobar'@'%';

GRANT ALL PRIVILEGES ON kconnect.* TO 'foobar'@'%';

SHOW GRANTS FOR 'foobar'@'%';

curl -d @"jdbc-source.json" -H "Content-Type: application/json" -X POST http://localhost:8083/connectors

curl -s "http://localhost:8083/connectors?expand=info&expand=status

curl -X DELETE http://localhost:8083/connectors/jdbc_source_connector_mysql_01